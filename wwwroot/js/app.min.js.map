{"version":3,"sources":["wwwroot/js/app.js"],"names":["app","angular","module","config","$routeProvider","$locationProvider","when","controller","templateUrl","title","otherwise","html5Mode","$scope","$timeout","$http","$location","model","signin","signinFormError","signinFormBusy","post","then","success","console","log","path","error","message","label","setTimeout","item","id","user","userName","facebookId","route","dish","price","isVeganFriendly","yes","no","created","vote","dishId","like","categories","name","key","picture","guid","loadStream","get","response","items","data","LESSON","CONFIG","CLIENT","window","location","href","indexOf","API","FACEBOOK_APP_ID","assetTypeEnum","Unknown","Picture","IOS","navigator","userAgent","match","constant","controllerAs","resolve","Users","isLoggedOrGoTo","isForward","$httpProvider","defaults","withCredentials","directive","restrict","link","scope","element","attributes","onTap","e","addClass","removeClass","addListeners","on","removeListeners","off","$on","animate","delays","undefined","split","delay","forEach","d","i","parseInt","length","push","removeClasses","join","shift","a","$parse","$compile","$window","Utils","doTop","busy","onTop","$apply","sy","ey","undrag","doBottom","onBottom","lbottom2","offsetHeight","inner","lbottom","padding","dragging","wheeling","move","down","removeDragListeners","bounce","ltop","redraw","time","y","speed","Math","abs","cy","pause","min","max","innerStyle","transform","toFixed","set","showIndicatorFor","percent","iy","indicator","ix","round","rows","html","count","indicatorStyle","play","loop","aKey","requestAnimationFrame","cancelAnimationFrame","onDown","getTouch","addDragListeners","onMove","prev","onUp","up","_onWheel","event","dir","deltaY","wheelDelta","onWheel","ondragstart","$eval","attr","find","Style","append","contents","throttle","src","ngImg","image","Image","onload","$set","this","load","$watch","newValue","WebWorker","worker","doWork","onImageLoaded","url","ngImgWorker","replace","template","form","placeholder","formKey","formFocus","required","readonly","control","options","number","source","canCreate","flatten","queryable","onSelected","MAX_ITEMS","service","getPhrase","Clear","phrase","input","val","Current","current","active","onTyping","Enter","onSelect","Up","Down","Parse","value","index","toLowerCase","NameA","substr","NameB","NameC","Filter","c","Search","setPhrase","onKeyDown","keyCode","preventDefault","onKeyUp","call","getClosest","target","onBlur","Init","init","maxItems","Number","POSITIVE_INFINITY","onFocus","$parent","setItem","parsedItem","$item","$event","extend","$watchCollection","require","type","validateType","$parsers","unshift","$setValidity","String","toString","filter","$filter","legacyFilter","cost","currency","ratio","formatting","APP","inches","unit","units","IMPERIAL","feet","floor","meters","size","cm","pounds","oz","kg","weight","grams","precision","format","timezone","parseTime","parseHour","Guest","User","Supervisor","Admin","factory","UserRolesEnum","prototype","isAdmin","role","isUser","email","w","backgroundPicture","$q","FacebookService","onFacebookStatus","deferred","authResponse","status","reject","FB","defer","promise","getFacebookMe","facebook","api","fields","getPictureMe","width","height","getLoginStatus","login","logout","deletePermissions","fbAsyncInit","appId","cookie","xfbml","version","s","js","fjs","getElementsByTagName","getElementById","createElement","parentNode","insertBefore","document","LocalStorage","_currentUser","currentUser","getCurrentUser","isLogged","isAuthenticated","redirect","isAdminOrGoTo","signup","signInWithFacebook","auth","signout","detail","userRoute","Vector","x","make","b","sqrt","normalize","l","incidence","angle","atan2","distance","cross","difference","towards","friction","add","copy","previous","t","touch","originalEvent","touches","changedTouches","pageX","pageY","getRelativeTouch","point","rect","getBoundingClientRect","left","top","el","selector","matchesFn","parent","some","fn","body","parentElement","func","wait","context","args","result","timeout","later","leading","getNow","apply","now","remaining","arguments","clearTimeout","trailing","lastTime","vendors","callback","currTime","Date","getTime","timeToCall","transformProperty","safariPropertyHack","div","style","every","prefix","props","scale","hoverScale","currentScale","styles","cssText","transformOrigin","self","callbacks","Worker","onmessage","isWebWorkerSupported","transformResponse","h","eval","object","o","postMessage","parse","JSON","stringify","isSupported","$httpAsync","wrap","getDefaults","isSuccess","createMap","Object","create","isString","parseHeaders","headers","fillInParsed","parsed","j","line","lowercase","trim","isObject","p","headersGetter","headersObj","method","responseType","common","string","head","put","patch","getter","statusText"],"mappings":"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","file":"wwwroot/js/app.min.js","sourcesContent":["/*global angular,FB */\n\nvar app = angular.module('ullo', ['ngRoute']);\n\napp.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\n\n\t$routeProvider.when('/', {                \n        controller: 'SignInCtrl',\n        templateUrl: 'templates/signin-test.html',\n        title: 'Sign In',\n        \n    }).when('/signin', {                \n        controller: 'SignInCtrl',\n        templateUrl: 'templates/signin-test.html',\n        title: 'Sign In',\n        \n    }).when('/stream', {        \n        controller: 'TestCtrl',\n        templateUrl: 'templates/test.html',\n        title: 'TestCtrl',\n        \n    }).when('/dishes/:dishId', {        \n        controller: 'TestCtrl',\n        templateUrl: 'templates/test.html',\n        title: 'Dishes',\n        \n    }).when('/test', {                \n        controller: 'TestCtrl',\n        templateUrl: 'templates/temp.html',\n        title: 'HomePage',\n        \n    }).when('/404', {\n        controller: 'TestCtrl',\n        templateUrl: 'templates/test.html',\n        title: 'Errore 404',\n        \n    });\n    \n    $routeProvider.otherwise('/404');\n    \n    // HTML5 MODE url writing method (false: #/anchor/use, true: /html5/url/use)\n    $locationProvider.html5Mode(true);\n    \n}]);\n\napp.controller('SignInCtrl', ['$scope', '$timeout', '$http', '$location', function ($scope, $timeout, $http, $location) {\n\n    $scope.model = {};\n\n    $scope.signin = function () {\n        $scope.signinFormError = null;\n        $scope.signinFormBusy = true;\n        $timeout(function() {\n            $http.post('http://ulloapi.wslabs.it/api/users/signin', $scope.model).then(function(success) {\n                console.log('signin', success);\n                $location.path('/stream');\n            }, function(error) {\n                console.log('error', error);\n                $scope.signinFormError = { message: error.message };\n            }).finally(function() {\n                $timeout(function() {\n                    $scope.signinFormBusy = false;\n                }, 3000);\n            });\n        }, 1000);\n    };\n    \n}]);\n    \napp.controller('TestCtrl', ['$scope', '$timeout', '$http', function ($scope, $timeout, $http) {\n\n    $scope.model = {\n        label: 'Carica',\n    };\n        \n    setTimeout(function() {\n        $scope.model.label = 'Carica Stream';\n    }, 1000);\n\n    $scope.item = {\n        id: 117,\n        user: {\n            userName: 'Fabio Ottaviani',\n            facebookId: '10153341954226947',\n            route: 'fabio-ottaviani'\n        },\n        dish: {\n            price: 5,\n            isVeganFriendly: false,\n            yes: 1,\n            no: 0,\n            created: '2016-04-27T19:13:45.497',\n            vote: {\n                dishId: 19,\n                like: true,\n                created: '2016-04-27T19:14:00.497'\n            },\n            categories: [\n                {\n                    id: 2,\n                    name: 'Piadine',\n                    key: 'piadine'\n                }\n            ],\n            id: 19,\n            name: 'Pizza Margherita',\n            key: 'pizzaMargherita'\n        },\n        picture: {\n            guid: '8fe99743-4ed3-46de-ba13-2c1bd7a45ffe',\n            created: '2016-04-27T19:13:41.02',\n            id: 20,\n            name: '8fe99743-4ed3-46de-ba13-2c1bd7a45ffe',\n            route: '/Media/Files/8fe99743-4ed3-46de-ba13-2c1bd7a45ffe.jpg',\n            key: '8Fe997434Ed346DeBa132C1bd7a45ffe'\n        },\n        created: '2016-04-27T19:13:45.497'\n    };\n    \n    $scope.loadStream = function() {\n        $http.get('http://ulloapi.wslabs.it/api/stream/anonymous').then(function(response){\n            $scope.items = response.data;\n        }, function(error) {\n            console.log('error', error);\n        });\n    };\n\n}]);\n\n\n/*global angular,dynamics*/\n\n/*global angular,FB */\n\nvar LESSON = true;\nvar CONFIG = {\n    CLIENT: window.location.href.indexOf('http://ulloclient.wslabs.it') === 0 ? 'http://ulloclient.wslabs.it' : 'http://dev.ullowebapp:8081',\n    API: (LESSON || window.location.href.indexOf('http://ulloclient.wslabs.it') === 0) ? 'http://ulloapi.wslabs.it' : 'https://localhost:44302',\n    FACEBOOK_APP_ID: window.location.href.indexOf('http://ulloclient.wslabs.it') === 0 ? '1054303094614120' : '1062564893787940',\n    assetTypeEnum: {\n        Unknown: 0,\n        Picture: 1,\n    },\n    IOS: (navigator.userAgent.match(/iPad|iPhone|iPod/g) ? true : false),\n};\n\napp.constant('APP', CONFIG);\n\napp.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\n\n\t// SECURE ROUTING\n    $routeProvider.when('/stream', {\n        title: 'Stream',\n        templateUrl: 'templates/stream.html',\n        controller: 'StreamCtrl',\n        controllerAs: 'streamCtrl',\n        resolve: {\n            user: ['Users', function(Users){\n                return Users.isLoggedOrGoTo('/splash');\n            }]\n        },\n\n    }).when('/dishes/:dishId', {\n        title: 'Dish',\n        templateUrl: 'templates/dish.html',\n        controller: 'DishCtrl',\n        controllerAs: 'dishCtrl',\n        resolve: {\n            user: ['Users', function(Users){\n                return Users.isLoggedOrGoTo('/splash');\n            }]\n        },\n        isForward: true,\n\n    }).when('/categories/:categoryId', {\n        title: 'Category',\n        templateUrl: 'templates/category.html',\n        controller: 'CategoryCtrl',\n        controllerAs: 'categoryCtrl',\n        resolve: {\n            user: ['Users', function(Users){\n                return Users.isLoggedOrGoTo('/splash');\n            }]\n        },\n        isForward: true,\n\n    }).when('/users/:userRoute', {\n        title: 'User',\n        templateUrl: 'templates/user.html',\n        controller: 'UserCtrl',\n        controllerAs: 'userCtrl',\n        resolve: {\n            user: ['Users', function(Users){\n                return Users.isLoggedOrGoTo('/splash');\n            }]\n        },\n        isForward: true,\n\n    }).when('/post', {\n        title: 'Add Post',\n        templateUrl: 'templates/post.html',\n        controller: 'PostCtrl',\n        controllerAs: 'postCtrl',\n        resolve: {\n            user: ['Users', function(Users){\n                return Users.isLoggedOrGoTo('/splash');\n            }]\n        },\n        isForward: true,\n\n    }).when('/settings', {\n        title: 'Settings',\n        templateUrl: 'templates/settings.html',\n        controller: 'SettingsCtrl',\n        controllerAs: 'settingsCtrl',\n        resolve: {\n            user: ['Users', function(Users){\n                return Users.isLoggedOrGoTo('/splash');\n            }]\n        },\n        isForward: true,\n\n\t// UNSECURE ROUTING\n    }).when('/splash', {\n        title: 'Splash',\n        templateUrl: 'templates/splash.html',\n        controller: 'SplashCtrl',\n        controllerAs: 'splashCtrl',\n\n    }).when('/signin', {\n        title: 'Sign In',\n        templateUrl: 'templates/signin.html',\n        controller: 'SigninCtrl',\n        controllerAs: 'signinCtrl',\n\n    }).when('/signup', {\n        title: 'Sign Up',\n        templateUrl: 'templates/signup.html',\n        controller: 'SignupCtrl',\n        controllerAs: 'signupCtrl',\n\n    }).when('/test', {\n        title: 'Test',\n        templateUrl: 'templates/dishes.html',\n        controller: 'TestCtrl',\n        controllerAs: 'testCtrl',\n\n    }).when('/404', {\n\n        title: 'Error 404',\n        templateUrl: '404.html',\n\n    });\n\n    $routeProvider.otherwise('/stream');\n\n    // HTML5 MODE url writing method (false: #/anchor/use, true: /html5/url/use)\n    $locationProvider.html5Mode(true);\n\n}]);\n\napp.config(['$httpProvider', function ($httpProvider) {\n    \n    $httpProvider.defaults.withCredentials = true;\n    \n}]);\n\n/*global angular,FB */\n\n/*global angular,FB,dynamics*/\n\n/**\n   * @ngdoc directive\n   * @name onTap\n   * @kind function\n   * @requires $timeout\n   *\n   * @description\n   * When called, it add a class named 'tapped' on element and removes it after a timeout of 500 ms\n   *\n   * @example\n   <example module=\"examples\">\n      <file name=\"index.html\">\n         <button type=\"button\" on-tap>Tap me!</button>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n      </file>\n      <file name=\"style.css\">\n         .tapped {\n            background: red;\n         }\n      </file>\n   </example>\n*/\napp.directive('onTap', ['$timeout', function($timeout) {\n   return {\n      restrict: 'A',\n      link: function(scope, element, attributes, model) {\n         function onTap(e) {\n            element.addClass('tapped');\n            $timeout(function() {\n               element.removeClass('tapped');\n            }, 500)\n         };\n         function addListeners() {\n            element.on('touchstart mousedown', onTap);\n         };\n         function removeListeners() {\n            element.off('touchstart mousedown', onTap);\n         };\n         scope.$on('$destroy', function() {\n            removeListeners();\n         });\n         addListeners();\n      }\n   }\n}]);\n\n/**\n   * @ngdoc directive\n   * @name animate\n   * @kind function\n   * @requires $timeout\n   *\n   * @description\n   * When called, it add a class named 'animated' on element\n   *\n   * @param {string} [animate=fadeIn] a comma separated animate.css class names\n   * @param {string} [delay=1] a comma separated durations list in milliseconds\n   *\n   * @example\n   <example module=\"examples\">\n      <file name=\"index.html\">\n         <div type=\"button\" animate=\"fadeInUp\" delay=\"1000\">\n            I'm an animated div.\n         </div>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n      </file>\n   </example>\n*/\napp.directive('animate', ['$timeout', function($timeout) {\n   return {\n      restrict: 'A',\n      link: function(scope, element, attributes, model) {\n         element.addClass('animated');\n         var animate = ['fadeIn'], delays = ['1'];\n         if (attributes.animate !== undefined) {\n            animate = attributes.animate.split(',');\n         }\n         if (attributes.delay !== undefined) {\n            delays = attributes.delay.split(',');\n         }\n         angular.forEach(delays, function(d, i) {\n            delays[i] = parseInt(d);\n         });\n         while (delays.length < animate.length) {\n            delays.push(delays[delays.length - 1] + 50);\n         }\n         var removeClasses = animate.join(' ');\n         if (animate[0].indexOf('In') !== -1) {\n            element.addClass('invisible');\n            removeClasses += ' invisible';\n         }\n         while (animate.length) {\n            var d = delays.shift();\n            var a = animate.shift();\n            $timeout(function() {\n               element.removeClass(removeClasses);\n               element.addClass(a);\n               if (animate.length === 0 && a.indexOf('Out') !== -1) {\n                  $timeout(function() {\n                     element.addClass('invisible');\n                  }, 1000);\n               }\n            }, d);\n         }\n      }\n   }\n}]);\n\n/**\n   * @ngdoc directive\n   * @name scrollable\n   * @kind function\n   *\n   * @description\n   * Scrollable div 3d accellerated with touch functionality and callbacks for infinite scroll\n   *\n   * @param {promise} [on-top] optional callback function that execute when reaching top\n   * @param {promise} [on-bottom] optional callback function that execute when reaching bottom\n   *\n   * @example\n   <example module=\"examples\">\n      <file name=\"index.html\">\n         <div ng-controller=\"TestCtrl\">\n            <section class=\"scrollable content\" scrollable on-top=\"$root.doRefresh()\">\n               <div class=\"inner\">\n                  <ul>\n                     <li ng-repeat=\"item in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]\">item <span ng-bind=\"item\"></span></li>\n                  </ul>\n               </div>\n            </section>\n         </div>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n         angular.controller('TestCtrl', ['$scope', '$q', function($scope, $q) {\n            $scope.doRefresh = function() {\n               var deferred = $q.defer();\n               if ($scope.busy) {\n                  deferred.reject();\n               } else {\n                  $scope.busy = true;\n                  $timeout(function() {\n                     $scope.busy = false;\n                     deferred.resolve();\n                  }, 500);\n               }\n               return deferred.promise;\n            };\n         }]);\n      </file>\n      <file name=\"style.css\">\n         .scrollable.content {\n            height: 200px!important;\n         }\n      </file>\n   </example>\n*/\napp.directive('scrollable', ['$parse', '$compile', '$window', '$timeout', 'Utils', function($parse, $compile, $window, $timeout, Utils) {\n   return {\n      restrict: 'A',\n      link: function(scope, element, attributes, model) {\n         $window.ondragstart = function() { return false; };\n         // CONSTS;\n         var padding = 150;\n         // FLAGS;\n         var dragging, wheeling, busy;\n         // MOUSE;\n         var down, move, prev, up;\n         // COORDS;\n         var sy = 0, ey = 0, cy = 0, ltop = 0, lbottom = 0, speed = 0, ix = 45, iy = 0;\n         // ANIMATION KEY;\n         var aKey;\n         var onTop, onBottom, showIndicatorFor;\n         if (attributes.onTop !== undefined) {\n            onTop = $parse(attributes.onTop, /* interceptorFn */ null, /* expensiveChecks */ true);\n         }\n         if (attributes.onBottom !== undefined) {\n            onBottom = $parse(attributes.onBottom, /* interceptorFn */ null, /* expensiveChecks */ true);\n         }\n         if (attributes.showIndicatorFor !== undefined) {\n            showIndicatorFor = scope.$eval(attributes.showIndicatorFor); // $parse(attributes.showIndicatorFor, /* interceptorFn */ null, /* expensiveChecks */ true);\n         }\n         // console.log('showIndicatorFor', showIndicatorFor);\n         // ELEMENTS & STYLESHEETS;\n         element.attr('unselectable', 'on').addClass('unselectable');\n         var inner = element.find('div');\n         var innerStyle = new Utils.Style();\n         var indicator = null, indicatorStyle;\n         if (showIndicatorFor) {\n            indicator = angular.element('<div class=\"indicator\"></div>');\n            indicatorStyle = new Utils.Style();\n            element.append(indicator);\n            $compile(indicator.contents())(scope);\n            indicatorStyle.transform('translate3d(' + ix.toFixed(2) + 'px,' + iy.toFixed(2) + 'px,0)');\n            indicatorStyle.set(indicator[0]);\n         }\n         function doTop() {\n            if (busy) {\n               return;\n            }\n            if (!onTop) {\n               return;\n            }\n            busy = true;\n            scope.$apply(onTop).then().finally(function() {\n               sy = ey = 0;\n               setTimeout(function() {\n                  undrag();\n                  busy = false;\n               }, 500);\n            });\n         }\n         function doBottom() {\n            if (busy) {\n               return;\n            }\n            if (!onBottom) {\n               return;\n            }\n            busy = true;\n            scope.$apply(onBottom).then().finally(function() {\n               var lbottom2 = element[0].offsetHeight - inner[0].offsetHeight;\n               if (lbottom2 > lbottom) {\n                  sy = ey = lbottom;\n               } else {\n                  sy = ey = lbottom + padding;\n               }\n               setTimeout(function() {\n                  undrag();\n                  busy = false;\n               }, 500);\n            });\n         }\n         function undrag() {\n            // console.log('undrag');\n            dragging = false;\n            wheeling = false;\n            move = null;\n            down = null;\n            removeDragListeners();\n         }\n         function bounce() {\n            ltop += padding;\n            lbottom -= padding;\n            if (ey > ltop) {\n               doTop();\n            } else if (ey < lbottom) {\n               doBottom();\n            }\n         }\n         function redraw(time) {\n            // if (!busy) {\n            ltop = 0;\n            lbottom = element[0].offsetHeight - inner[0].offsetHeight;\n            if (dragging) {\n               ey = sy + move.y - down.y;\n               bounce();\n            } else if (speed) {\n               ey += speed;\n               speed *= .75;\n               if (wheeling) {\n                  bounce();\n               }\n               if (Math.abs(speed) < 0.05) {\n                  speed = 0;\n                  ey = sy = cy;\n                  wheeling = false;\n                  pause();\n               }\n            }\n            // }\n            ey = Math.min(ltop, ey);\n            ey = Math.max(lbottom, ey);\n            cy += (ey - cy) / 4;\n            innerStyle.transform('translate3d(0,' + cy.toFixed(2) + 'px,0)');\n            innerStyle.set(inner[0]);\n            if (showIndicatorFor) {\n               if (dragging || wheeling || speed) {\n                  var percent = cy / (element[0].offsetHeight - inner[0].offsetHeight);\n                  percent = Math.max(0, Math.min(1, percent));\n                  iy = (element[0].offsetHeight - indicator[0].offsetHeight) * (percent);\n                  ix += (0 - ix) / 4;\n                  // var count = Math.round(inner[0].offsetHeight / 315);\n                  var i = Math.max(1, Math.round(percent * showIndicatorFor.rows.length));\n                  indicator.html(i + '/' + showIndicatorFor.count);\n                  // indicator.html((percent * 100).toFixed(2).toString());\n               } else {\n                  ix += (45 - ix) / 4;\n               }\n               indicatorStyle.transform('translate3d(' + ix.toFixed(2) + 'px,' + iy.toFixed(2) + 'px,0)');\n               indicatorStyle.set(indicator[0]);\n            }\n         }\n         function play() {\n            function loop(time) {\n               redraw(time);\n               aKey = window.requestAnimationFrame(loop, element);\n            }\n            if (!aKey) {\n               loop();\n            }\n         }\n         function pause() {\n            if (aKey) {\n               window.cancelAnimationFrame(aKey);\n               aKey = null;\n               // console.log('Animation.paused');\n            }\n         }\n         function onDown(e) {\n            if (!busy) {\n               sy = ey = cy;\n               speed = 0;\n               down = Utils.getTouch(e);\n               wheeling = false;\n               // console.log(down);\n               addDragListeners();\n               play();\n            }\n         }\n         function onMove(e) {\n            prev = move;\n            move = Utils.getTouch(e);\n            dragging = true;\n            // console.log(move);\n         }\n         function onUp(e) {\n            if (move && prev) {\n               speed += (move.y - prev.y) * 4;\n            }\n            sy = ey = cy;\n            dragging = false;\n            move = null;\n            down = null;\n            prev = null;\n            up = Utils.getTouch(e);\n            // console.log(up);\n            removeDragListeners();\n         }\n         function _onWheel(e) {\n            if (!busy) {\n               if (!e) e = event;\n               var dir = (((e.deltaY < 0 || e.wheelDelta > 0) || e.deltaY < 0) ? 1 : -1)\n               /*\n               var evt = window.event || e;\n               var delta = evt.detail ? evt.detail * -120 : evt.wheelDelta\n               speed += delta;\n               */\n               speed += dir * 5;\n               wheeling = true;\n               play();\n            }\n         }\n         var onWheel = Utils.throttle(_onWheel, 25);\n         function addListeners() {\n            element.on('touchstart mousedown', onDown);\n            element.on('wheel', onWheel);\n            // element.addEventListener('DOMMouseScroll',handleScroll,false); // for Firefox\n            // element.addEventListener('mousewheel',    handleScroll,false); // for everyone else\n         };\n         function removeListeners() {\n            element.off('touchstart mousedown', onDown);\n            element.off('wheel', onWheel);\n         };\n         function addDragListeners() {\n            angular.element($window).on('touchmove mousemove', onMove);\n            angular.element($window).on('touchend mouseup', onUp);\n         };\n         function removeDragListeners() {\n            angular.element($window).off('touchmove mousemove', onMove);\n            angular.element($window).off('touchend mouseup', onUp);\n         };\n         scope.$on('$destroy', function() {\n            removeListeners();\n         });\n         addListeners();\n      },\n   };\n}]);\n\n/**\n   * @ngdoc directive\n   * @name ngImg\n   * @kind function\n   *\n   * @description\n   * Whenever the image has loaded, a loaded class will be added to the image element\n   *\n   * @param {string} ng-img path to the image to load\n   *\n   * @example\n   <example module=\"examples\">\n      <file name=\"index.html\">\n         <img src=\"\" ng-img=\"'/img/nature-01.jpg'\"/>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n      </file>\n      <file name=\"style.css\">\n         [ng-img] {\n            max-width: 100%;\n            opacity: 0;\n            transition: opacity ease-in-out 250ms;\n         }\n         [ng-img].loaded {\n            opacity: 1;\n         }\n      </file>\n   </example>\n*/\napp.directive('ngImg', ['$parse', '$timeout', function($parse, $timeout) {\n   return {\n      restrict: 'A',\n      link: function(scope, element, attributes, model) {\n         var src = $parse(attributes.ngImg, /* interceptorFn */ null, /* expensiveChecks */ true);\n         var image = new Image();\n         image.onload = function() {\n            attributes.$set('src', this.src);\n            setTimeout(function() {\n               element.addClass('loaded');\n            }, 10);\n         }\n         image.load = function(src) {\n            element.removeClass('loaded');\n            this.src = src;\n         }\n         scope.$watch(src, function(newValue) {\n            if (!newValue) {\n               attributes.$set('src', null);\n            } else {\n               image.load(newValue);\n            }\n         });\n      }\n   };\n}]);\n\n/**\n   * @ngdoc directive\n   * @name ngImgWorker\n   * @kind function\n   *\n   * @description\n   * As ngImg but using webworker. Whenever the image has loaded, a loaded class will be added to the image element\n   *\n   * @param {string} ng-img path to the image to load\n   *\n   * @example\n\t<example module=\"examples\">\n      <file name=\"index.html\">\n         <img src=\"\" ng-img-worker=\"'/img/nature-02.jpg'\"/>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n      </file>\n      <file name=\"style.css\">\n         [ng-img] {\n            max-width: 100%;\n            opacity: 0;\n            transition: opacity ease-in-out 250ms;\n         }\n         [ng-img].loaded {\n            opacity: 1;\n         }\n      </file>\n\t</example>\n*/\napp.directive('ngImgWorker', ['$parse', 'WebWorker', function($parse, WebWorker) {\n   var worker = new WebWorker('/js/workers/loader.min.js');\n   return {\n      restrict: 'A',\n      link: function(scope, element, attributes, model) {\n         function doWork(src) {\n            element.removeClass('loaded');\n            function onImageLoaded(src) {\n               attributes.$set('src', src);\n               setTimeout(function() {\n                  element.addClass('loaded');\n               }, 100);\n            }\n            worker.post({ url: src }).then(function(data) {\n               onImageLoaded(data.url);\n            }, function(error) {\n               onImageLoaded(null);\n            });\n         }\n         var src = scope.$eval(attributes.ngImgWorker);\n         if (!src) {\n            attributes.$set('src', null);\n         } else {\n            doWork(src);\n         }\n      }\n   };\n}]);\n\n/**\n   * @ngdoc directive\n   * @name control\n   * @kind function\n   *\n   * @description\n   * Dinamic form control generator through templates with extended validation\n   *\n   * @param {string} model the target model of control\n   * @param {string} [control=text] the type of control, available types (text, password, email, number, checkbox, textarea, datetime-local, select, autocomplete)\n   * @param {string} [form=Form] the name of the form\n   * @param {string} [title=Untitled] the title of the control\n   * @param {string} [placeholder=title] the placeholder of the control\n   * @param {string} [source=null] datasource of select as array\n   * @param {string} [key=id] optional key for select option\n   * @param {string} [label=name] optional label for select option\n   * @param {string} [required=false] if the control is required\n   *\n   * @example\n   <example module=\"examples\">\n      <file name=\"index.html\">\n         <div class=\"container-fluid\">\n            <div class=\"row\">\n               <form name=\"myForm\">\n                  <div class=\"form-group col-xs-12\" form=\"myForm\" control=\"select\" title=\"category\" placeholder=\"select a category\" model=\"model.category\" source=\"[{name:'Main',id:1}, {name:'Second',id:2}]\" required=\"true\"></div>\n                  <div class=\"form-group col-xs-12\" form=\"myForm\" control=\"number\" title=\"dish price\" placeholder=\"type the price of the dish\" model=\"model.dish.price\" required=\"true\"></div>\n                  <div class=\"form-group col-xs-12\" form=\"myForm\" control=\"checkbox\" title=\"is vegan friendly\" placeholder=\"please check if the dish is vegan friendly\" model=\"model.dish.isVeganFriendly\"></div>\n               </form>\n            </div>\n         </div>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n      </file>\n   </example>\n*/\napp.directive('control', [function() {\n   return {\n      restrict: 'A',\n      replace: true,\n      template: function(element, attributes) {\n         var form = attributes.form || 'Form';\n         var title = attributes.title || 'Untitled';\n         var placeholder = attributes.placeholder || title;\n         var name = title.replace(/[^0-9a-zA-Z]/g, \"\").split(' ').join('');\n         var formKey = form + '.' + name;\n         var formFocus = ' ng-focus=\"' + formKey + '.hasFocus=true\" ng-blur=\"' + formKey + '.hasFocus=false\"';\n         var required = '';\n         var label = (attributes.label ? attributes.label : 'name');\n         var key = (attributes.key ? attributes.key : 'id');\n         var model = attributes.model;\n         if (attributes.required) {\n            required = '<span ng-messages=\"' + (attributes.readonly ? '' : '(' + form + '.$submitted || ' + formKey + '.$touched) && ') + form + '.' + name + '.$error\" role=\"alert\"><span ng-message=\"required\" class=\"label-error animated flash\"> &larr; required</span>';\n            switch (attributes.control) {\n               case 'password':\n                  required = required + '<span ng-message=\"minlength\" class=\"label-error animated flash\"> &larr; at least 6 chars</span>';\n                  break;\n               case 'email':\n                  required = required + '<span ng-message=\"email\" class=\"label-error animated flash\"> &larr; incorrect</span>';\n                  break;\n               case 'number':\n                  required = required + '<span ng-message=\"number\" class=\"label-error animated flash\"> &larr; enter a valid number</span>';\n                  break;\n            }\n            if (attributes.match !== undefined) {\n               required = required + '<span ng-message=\"match\" class=\"label-error animated flash\"> &larr; not matching</span>';\n            }\n            required = required + '</span>';\n         } else {\n            required = ' (optional)';\n         }\n         var template = '<div ' + (attributes.readonly ? ' class=\"readonly\" ' : '') + ' ng-class=\"{ focus: ' + formKey + '.hasFocus, success: ' + formKey + '.$valid, error: ' + formKey + '.$invalid && (form.$submitted || ' + formKey + '.$touched), empty: !' + formKey + '.$viewValue }\"><label for=\"' + name + '\" class=\"control-label\">' + title + required + '</label>';\n         switch (attributes.control) {\n            case 'checkbox':\n               template = '<div class=\"checkbox\">';\n               template += '<span class=\"checkbox-label\">' + title + required + '</span>';\n               template += '<span class=\"switch\"><input id=\"' + name + '\" name=\"' + name + '\" type=\"checkbox\" ng-model=\"' + model + '\" ' + (attributes.required ? 'required=\"true\"' : '') + ' class=\"toggle toggle-round-flat\"><label for=\"' + name + '\"></label></span>';\n               template += '</div>';\n               break;\n            case 'select':\n               var options = attributes.number\n                  ? 'item.' + key + ' as item.' + label + ' for item in ' + attributes.source\n                  : 'item.' + label + ' for item in ' + attributes.source + ' track by item.' + key;\n               template += '<select name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\" ng-options=\"' + options + '\" ' + (attributes.number ? 'convert-to-number' : '') + ' ' + (attributes.required ? 'required=\"true\"' : '') + '><option value=\"\" disabled selected hidden>' + placeholder + '</option></select>';\n               break;\n            case 'autocomplete':\n               var canCreate = (attributes.canCreate ? attributes.canCreate : false);\n               var flatten = (attributes.flatten ? attributes.flatten : false);\n               var queryable = (attributes.queryable ? attributes.queryable : false);\n               var onSelected = (attributes.onSelected ? ' on-selected=\"' + attributes.onSelected + '\"' : '');\n               template += '<input name=\"' + name + '\" ng-model=\"' + model + '\" type=\"hidden\" ' + (attributes.required ? 'required' : '') + '>';\n               template += '<div control-autocomplete=\"' + attributes.source + '\" model=\"' + model + '\" label=\"' + label + '\"  key=\"' + key + '\" can-create=\"' + canCreate + '\" flatten=\"' + flatten + '\" queryable=\"' + queryable + '\" placeholder=\"' + placeholder + '\" on-focus=\"' + formKey + '.hasFocus=true\" on-blur=\"' + formKey + '.hasFocus=false\"' + onSelected + '></div>';\n               break;\n            case 'textarea':\n               template += '<textarea name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" ' + (attributes.required ? 'required' : '') + ' rows=\"' + (attributes.rows ? attributes.rows : '1') + '\"' + formFocus + '></textarea>';\n               break;\n            case 'datetime-local':\n               placeholder == title ? placeholder = 'yyyy-MM-ddTHH:mm:ss' : null;\n               template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"datetime-local\"' + (attributes.required ? ' required' : '') + (attributes.readonly ? ' readonly' : '') + formFocus + '>';\n               break;\n            case 'password':\n               template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"password\" ng-minlength=\"6\" ' + (attributes.required ? 'required' : '') + formFocus + '>';\n               break;\n            case 'email':\n               template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"email\" ' + (attributes.required ? 'required' : '') + formFocus + '>';\n               break;\n            case 'number':\n               template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"text\"' + (attributes.required ? ' required' : '') + (attributes.readonly ? ' readonly' : '') + formFocus + ' validate-type=\"number\">'; // ' validator=\"{ number: isNumber }\">';\n               break;\n            case 'text':\n            default:\n               template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"text\"' + (attributes.required ? ' required' : '') + (attributes.readonly ? ' readonly' : '') + formFocus + '>';\n               break;\n         }\n         return template + '</div>';\n      },\n      link: function(scope, element, attributes, model) {\n      },\n   };\n}]);\n\n/**\n   * @ngdoc directive\n   * @name controlAutocomplete\n   * @kind function\n   * @requires ngModel\n   *\n   * @description\n   * Custom control type with autocomplete functionality. (use the shortcut version with control directive)\n   *\n   * @param {service} controlAutocomplete the datasource service\n   * @param {model} model the target model of control\n   * @param {boolean} [canCreate=false] setted on true the control can add new entities\n   * @param {boolean} [flatten=false] set to true to flat the value to the model\n   * @param {boolean} [queryable=false] set to true if is a queryable service\n   * @param {string} [key=id] optional key for select option\n   * @param {string} [label=name] optional label for select option\n   *\n   * @example\n   <example module=\"examples\">\n      <file name=\"index.html\">\n         <div class=\"container-fluid\">\n            <div class=\"row\">\n               <form name=\"myForm\">\n                  <div class=\"form-group col-xs-12 empty focus\">\n                     <label for=\"dishname\" class=\"control-label\">dish name<span ng-messages=\"(myForm.$submitted || myForm.dishname.$touched) &amp;&amp; myForm.dishname.$error\" role=\"alert\" class=\"ng-inactive\"></span></label>\n                     <input name=\"dishname\" ng-model=\"model.name\" type=\"hidden\" required=\"\">\n                     <div control-autocomplete=\"dishesAutocomplete\" model=\"model.name\" label=\"name\" key=\"name\" can-create=\"true\" flatten=\"true\" queryable=\"false\" placeholder=\"type the name of the dish\" on-focus=\"myForm.dishname.hasFocus=true\" on-blur=\"myForm.dishname.hasFocus=false\" on-selected=\"onDishSelected($item)\" class=\"ng-isolate-scope\"></div>\n               </form>\n            </div>\n         </div>\n      </file>\n      <file name=\"script.js\">\n         angular.module('examples', ['wsUtils']);\n         angular.run(['$rootScope', '$q', function($rootScope, $q) {\n            $rootScope.dishesAutocomplete = ;\n            $rootScope.onDishSelected = function($item) {\n               alert($item);\n            };\n         }]);\n      </file>\n   </example>\n*/\napp.directive('controlAutocomplete', ['$parse', '$window', '$timeout', 'Utils', function($parse, $window, $timeout, Utils) {\n   var MAX_ITEMS = 5;\n   return {\n      restrict: 'A',\n      scope: {\n         service: '=controlAutocomplete',\n         canCreate: '=',\n         flatten: '=',\n         queryable: '=',\n         model: '=',\n         label: '@',\n         key: '@',\n      },\n      template: function(element, attributes) {\n         var template = '<div>';\n         template += '   <input class=\"form-control\" ng-model=\"phrase\" ng-model-options=\"{ debounce: 150 }\" placeholder=\"' + attributes.placeholder + '\" type=\"text\" ng-focus=\"onFocus()\">';\n         template += '   <ul class=\"form-autocomplete\" ng-show=\"items.length\">';\n         template += '       <li ng-repeat=\"item in items\" ng-class=\"{ active: active == $index }\" ng-click=\"onSelect(item)\">';\n         template += '           <span>{{item.NameA}}<span class=\"token\">{{item.NameB}}</span>{{item.NameC}}</span>';\n         template += '       </li>';\n         template += '   </ul>';\n         template += '</div>';\n         return template;\n      },\n      link: function(scope, element, attributes, model) {\n         var onSelected = $parse(attributes.onSelected);\n         var input = element.find('input');\n         var label = (scope.label ? scope.label : 'name');\n         var key = (scope.key ? scope.key : 'id');\n         function getPhrase() {\n            if (scope.model) {\n               return scope.flatten ? scope.model : scope.model[label];\n            } else {\n               return null;\n            }\n         }\n         scope.phrase = getPhrase();\n         scope.count = 0;\n         scope.items = [];\n         scope.active = -1;\n         scope.maxItems = scope.maxItems || Number.POSITIVE_INFINITY;\n         function Clear(phrase) {\n            scope.items.length = 0;\n            scope.count = 0;\n            scope.phrase = phrase || null;\n            input.val(scope.phrase);\n         }\n         function Current() {\n            var current = null;\n            if (scope.active != -1 && scope.items.length > scope.active) {\n               current = scope.items[scope.active];\n            }\n            return current;\n         }\n         scope.onFocus = function() {\n            if (attributes.onFocus !== undefined) {\n               scope.$parent.$eval(attributes.onFocus);\n            }\n            if (input.val() === getPhrase()) {\n               input.val(null);\n            }\n         };\n         scope.onBlur = function() {\n            if (attributes.onBlur !== undefined) {\n               scope.$parent.$eval(attributes.onBlur);\n            }\n            Clear(getPhrase());\n         };\n         scope.onSelect = function(item) {\n            if (scope.queryable) {\n               scope.service.setItem(item).then(function(parsedItem) {\n                  onSelected({ $item: parsedItem }, scope.$parent, { $event: {} });\n                  $timeout(function() {\n                     if (scope.flatten) {\n                        scope.model = parsedItem[key];\n                     } else {\n                        scope.model = scope.model || {};\n                        angular.extend(scope.model, parsedItem);\n                     }\n                     scope.onBlur();\n                  }, 1);\n               });\n            } else {\n               onSelected({ $item: item }, scope.$parent, { $event: {} });\n               if (scope.flatten) {\n                  scope.model = item[key];\n               } else {\n                  scope.model = scope.model || {};\n                  angular.extend(scope.model, item);\n               }\n               scope.onBlur();\n            }\n         };\n         function onTyping(phrase) {\n            if (scope.canCreate) {\n               if (scope.flatten) {\n                  if (key === label) {\n                     scope.model = phrase;\n                  }\n               } else {\n                  scope.model = {};\n                  scope.model[label] = phrase;\n               }\n            }\n         };\n         function Enter() {\n            var item = Current();\n            if (item) {\n               scope.onSelect(item);\n            }\n            scope.$apply();\n         }\n         function Up() {\n            scope.active--;\n            if (scope.active < 0) {\n               scope.active = scope.items.length - 1;\n            }\n            scope.$apply();\n         }\n         function Down() {\n            scope.active++;\n            if (scope.items.length == 0) {\n               scope.active = -1;\n            } else if (scope.active >= scope.items.length) {\n               scope.active = 0;\n            }\n            scope.$apply();\n         }\n         function Parse(data) {\n            scope.items = data.items;\n            scope.count = data.count;\n            angular.forEach(scope.items, function(value, index) {\n               var name = value[label];\n               var i = name.toLowerCase().indexOf(scope.phrase.toLowerCase());\n               value.NameA = name.substr(0, i);\n               value.NameB = name.substr(i, scope.phrase.length);\n               value.NameC = name.substr(i + scope.phrase.length, name.length - (i + scope.phrase.length));\n            });\n         }\n         function Filter(data) {\n            var c = 0, i = [];\n            if (scope.phrase.length > 1) {\n               angular.forEach(data.items, function(value, index) {\n                  var name = value[label];\n                  if (name.toLowerCase().indexOf(scope.phrase.toLowerCase()) !== -1) {\n                     if (i.length < MAX_ITEMS) {\n                        i.push(value);\n                     }\n                     c++;\n                  }\n               });\n            }\n            Parse({\n               count: c,\n               items: i\n            });\n         }\n         function Search() {\n            scope.phrase = input.val();\n            scope.active = -1;\n            onTyping(scope.phrase);\n            if (scope.queryable) {\n               scope.service.setPhrase(scope.phrase).then(function(success) {\n                  scope.items = success.items;\n                  scope.count = success.count;\n               }, function(error) {\n                  console.log('Search.queryable.error', scope.phrase, error);\n               }).finally(function() {\n\n               });\n            } else {\n               Filter({\n                  count: scope.service.length,\n                  items: scope.service\n               });\n               scope.$apply();\n            }\n         }\n         function onKeyDown(e) {\n            switch (e.keyCode) {\n               case 9: // Tab\n               case 13: // Enter\n                  Enter();\n                  if (scope.items.length) {\n                     e.preventDefault ? e.preventDefault() : null;\n                     return false;\n                  }\n                  break;\n               case 38: // Up\n                  Up();\n                  break;\n               case 40: // Down\n                  Down();\n                  break;\n            }\n         }\n         function onKeyUp(e) {\n            switch (e.keyCode) {\n               case 9: // Tab\n               case 13: // Enter\n                  break;\n               case 39: // Right\n                  break;\n               case 37: // Left\n                  break;\n               case 38: // Up\n                  break;\n               case 40: // Down\n                  break;\n               default: // Text\n                  Search.call(this);\n                  break;\n            }\n         }\n         function onUp(e) {\n            if (Utils.getClosest(e.target, '[control-autocomplete]') === null) {\n               scope.$apply(function() {\n                  scope.onBlur();\n               });\n            }\n            return true;\n         }\n         function addListeners() {\n            input.on('keydown', onKeyDown);\n            input.on('keyup', onKeyUp);\n            angular.element($window).on('mouseup touchend', onUp);\n         };\n         function removeListeners() {\n            input.off('keydown', onKeyDown);\n            input.off('keyup', onKeyUp);\n            angular.element($window).off('mouseup touchend', onUp);\n         };\n         scope.$on('$destroy', function() {\n            removeListeners();\n         });\n         var init = false;\n         function Init() {\n            if (!init) {\n               addListeners();\n               init = true;\n            }\n         }\n         scope.$watch('service', function(newValue) {\n            if (newValue && (newValue.length || scope.queryable)) {\n               Init();\n            }\n         });\n         scope.$watchCollection('model', function(newValue) {\n            if (newValue) {\n               if (scope.flatten && label === key) {\n                  scope.phrase = newValue;\n                  input.val(scope.phrase);\n               } else if (newValue[label]) {\n                  scope.phrase = newValue[label];\n                  input.val(scope.phrase);\n               }\n            }\n         });\n      },\n   };\n}]);\n\n/**\n   * @ngdoc directive\n   * @name validateType\n   * @kind function\n   * @requires ngModel\n   *\n   * @description\n   * Custom validation type for ngModel\n   *\n   * @param {string} [validateType=number] the type of custom validation\n   *\n   * @example\n\t<example module=\"examples\">\n\t\t<file name=\"index.html\">\n\t\t\t<form name=\"myForm\">\n\t\t\t\t<input name=\"myValue\" type=\"text\" ng-model=\"model\" validate-type=\"number\" />\n\t\t\t\t<span ng-messages=\"(myForm.$submitted || myForm.$touched) && myForm.myValue.$error\" role=\"alert\">\n\t\t\t\t\t<span ng-message=\"number\" class=\"label-error animated flash\"> &larr; enter a valid number</span>\n\t\t\t\t</span>\n\t\t\t</form>\n\t\t</file>\n\t\t<file name=\"script.js\">\n\t\t\tangular.module('examples', ['wsUtils']);\n\t\t</file>\n\t</example>\n*/\napp.directive('validateType', function() {\n   return {\n      require: 'ngModel',\n      link: function(scope, element, attributes, model) {\n         var type = attributes.validateType;\n         switch (type) {\n            case 'number':\n               model.$parsers.unshift(function(value) {\n                  model.$setValidity(type, String(value).indexOf(Number(value).toString()) !== -1);\n                  return value;\n               });\n               break;\n         }\n      }\n   };\n});\n\napp.filter('customCurrency', ['$filter', function ($filter) {\n    var legacyFilter = $filter('currency');\n    return function (cost, currency) {\n        return legacyFilter(cost * currency.ratio, currency.formatting);\n    }\n}]);\n\napp.filter('customSize', ['APP', function (APP) {\n    return function (inches) {\n        if (APP.unit === APP.units.IMPERIAL) {\n            var feet = Math.floor(inches / 12);\n            inches = inches % 12;\n            inches = Math.round(inches * 10) / 10;\n            return (feet ? feet + '\\' ' : '') + (inches + '\\'\\'');\n        } else {\n            var meters = Math.floor(inches * APP.size.ratio);\n            var cm = (inches * APP.size.ratio * 100) % 100;\n            cm = Math.round(cm * 10) / 10;\n            return (meters ? meters + 'm ' : '') + (cm + 'cm');\n        }\n    };\n}]);\n\napp.filter('customWeight', ['APP', function (APP) {\n    return function (pounds) {\n        if (APP.unit === APP.units.IMPERIAL) {\n            if (pounds < 1) {\n                var oz = pounds * 16;\n                oz = Math.round(oz * 10) / 10;\n                return (oz ? oz + 'oz ' : '');\n            } else {\n                pounds = Math.round(pounds * 100) / 100;\n                return (pounds ? pounds + 'lb ' : '');\n            }\n        } else {\n            var kg = Math.floor(pounds * APP.weight.ratio / 1000);\n            var grams = (pounds * APP.weight.ratio) % 1000;\n            grams = Math.round(grams * 10) / 10;\n            return (kg ? kg + 'kg ' : '') + (grams + 'g');\n        }\n    };\n}]);\n\napp.filter('customNumber', ['$filter', function ($filter) {\n    var filter = $filter('number');\n    return function (value, precision, unit) {\n        unit = unit || '';\n        return (value ? filter(value, precision) + unit : '-');\n    }\n}]);\n\napp.filter('customDate', ['$filter', function ($filter) {\n    var filter = $filter('date');\n    return function (value, format, timezone) {\n        return value ? filter(value, format, timezone) : '-';\n    }\n}]);\n\napp.filter('customTime', ['$filter', function ($filter) {\n    return function (value, placeholder) {\n        if (value) {\n            return Utils.parseTime(value);\n        } else {\n            return (placeholder ? placeholder : '-');\n        }\n    }\n}]);\n\napp.filter('customDigital', ['$filter', function ($filter) {\n    return function (value, placeholder) {\n        if (value) {\n            return Utils.parseHour(value);\n        } else {\n            return (placeholder ? placeholder : '-');\n        }\n    }\n}]);\n\napp.filter('customString', ['$filter', function ($filter) {\n    return function (value, placeholder) {\n        return value ? value : (placeholder ? placeholder : '-');\n    }\n}]);\n\napp.filter('customEnum', function () {\n    return function (val) {\n        val = val + 1;\n        return val < 10 ? '0' + val : val;\n    };\n});\n\n/*global angular,FB */\n\napp.value('UserRoles', [{\n    name: 'Guest', id: 1\n}, {\n    name: 'User', id: 2\n}, {\n    name: 'Supervisor', id: 3\n}, {\n    name: 'Admin', id: 4\n}]);\n\napp.value('UserRolesEnum', {\n    'Guest': 1,\n    'User': 2,\n    'Supervisor': 3,\n    'Admin': 4,\n});\n\napp.factory('User', ['UserRolesEnum', function (UserRolesEnum) {\n    function User(data) {\n        // Extend instance with data\n        data ? angular.extend(this, data) : null;\n    }\n    User.prototype = {\n        // If user instance is in role Administrator\n        isAdmin: function () {\n            return this.role === UserRolesEnum.Admin;\n        },\n        // If user parameters equals user instance\n        isUser: function (user) {\n            return this.email === user.email;\n        },\n        picture: function (size) {\n          size = size || 'sm';\n          var w;\n          switch(size) {\n              case 'sm':\n                w = 50;\n              break;\n              case 'md':\n                w = 300;\n              break;\n              default:\n          }\n          return this.facebookId ? 'https://graph.facebook.com/'+ this.facebookId +'/picture?width=' + w + '&height=' + w + '&type=square' : '/img/avatar-default.png';\n        },\n        backgroundPicture: function(size) {\n            return 'background-image: url(' + this.picture(size) + ');';\n        },\n    };\n    return User;\n}]);\n/*global angular,FB */\n\n/*global angular,FB */\n\napp.factory('FacebookService', ['$q', 'APP', function ($q, APP) {\n\n    function FacebookService() {\n\n    }\n\n    FacebookService.FB = function () {\n        var deferred = $q.defer();\n        if (window['FB'] !== undefined) {\n            deferred.resolve(window['FB']);\n        } else {\n            FacebookService.init().then(function (success) {\n                deferred.resolve(window['FB']);\n            }, function (error) {\n                deferred.reject(error);\n            })\n        }\n        return deferred.promise;\n    }\n\n    FacebookService.getFacebookMe = function () {\n        var deferred = $q.defer();\n\t\tFacebookService.FB().then(function (facebook) {\n            facebook.api('/me', { fields: 'id,name,first_name,last_name,email,gender,picture,cover,link' }, function (response) {\n                if (!response || response.error) {\n                    deferred.reject('Error occured');\n                } else {\n                    deferred.resolve(response);\n                }\n            });\n        });\n        return deferred.promise;\n    };\n\n    FacebookService.getPictureMe = function () {\n        var deferred = $q.defer();\n\t\tFacebookService.FB().then(function (facebook) {\n            facebook.api('/me/picture', { width: 300, height: 300, type: 'square' }, function (response) {\n                if (!response || response.error) {\n                    deferred.reject('Error occured');\n                } else {\n                    deferred.resolve(response);\n                }\n            });\n        });\n        return deferred.promise;\n    };\n\n    FacebookService.getLoginStatus = function () {\n        var deferred = $q.defer();\n\t\tFacebookService.FB().then(function (facebook) {\n            facebook.getLoginStatus(function (response) {\n                onFacebookStatus(response, deferred);\n            });\n        });\n        return deferred.promise;\n    };\n\n    FacebookService.login = function () {\n        var deferred = $q.defer();\n\t\tFacebookService.FB().then(function (facebook) {\n            facebook.login(function (response) {\n                onFacebookStatus(response, deferred);\n            }, {\n                scope: 'public_profile,email' // publish_stream,\n            });\n        });\n        return deferred.promise;\n    };\n\n    FacebookService.logout = function () {\n        var deferred = $q.defer();\n\t\tFacebookService.FB().then(function (facebook) {\n\t\t\tfacebook.logout(function (response) {\n\t\t\t\tdeferred.resolve(response);\n\t\t\t});\n        });\n        return deferred.promise;\n    };\n\n    FacebookService.deletePermissions = function () {\n        var deferred = $q.defer();\n\t\tFacebookService.FB().then(function (facebook) {\n\t\t\tfacebook.api('/me/permissions', 'delete', function (response) {\n\t\t\t\tdeferred.resolve(response);\n            });\n        });\n        return deferred.promise;\n    };\n\n    FacebookService.init = function () {\n        var deferred = $q.defer();\n        window.fbAsyncInit = function () {\n            FB.init({\n                appId: APP.FACEBOOK_APP_ID,\n                status: true,\n                cookie: true,\n                xfbml: true,\n                version: 'v2.5'\n            });\n            deferred.resolve(FB);\n        };\n        try {\n            (function (d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) { return; }\n                js = d.createElement(s); js.id = id;\n                js.src = \"//connect.facebook.net/en_US/sdk.js\";\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        } catch (e) {\n            deferred.reject(e);\n        }\n        return deferred.promise;\n    };\n\n    function onFacebookStatus(response, deferred) {\n        FacebookService.authResponse = null;\n        if (response.status === 'connected') {\n            FacebookService.authResponse = response.authResponse;\n            deferred.resolve(response);\n        } else if (response.status === 'not_authorized') {\n            deferred.reject(response);\n        } else {\n            deferred.reject(response);\n        }\n    };\n\n    return FacebookService;\n\n}]);\n\napp.factory('Users', ['$q', '$http', '$location', '$timeout', 'APP', 'LocalStorage', 'User', function ($q, $http, $location, $timeout, APP, LocalStorage, User) {\n\n    // PRIVATE VARIABLE FOR CURRENT USER\n    var _currentUser = null;\n\n    function Users() {\n    }\n\n    Users.prototype = {\n    };\n\n    // STATIC CLASS METHODS\n    Users.currentUser = function () {\n        return _currentUser;\n    };\n\n    Users.getCurrentUser = function () {\n        var deferred = $q.defer();\n        if (_currentUser) {\n            deferred.resolve(_currentUser);\n        } else {\n            $http.get(APP.API + '/api/users/current/').then(function success(response) {\n                if (response && response.data) {\n                    _currentUser = new User(response.data);\n                    deferred.resolve(_currentUser);\n                } else {\n                    deferred.resolve(null); // deferred.reject(null);\n                }\n            }, function error(response) {\n                deferred.reject(response);\n            });\n        }\n        return deferred.promise;\n    };\n\n    Users.isLogged = function () {\n        var deferred = $q.defer();\n        Users.getCurrentUser().then(function (user) {\n            // console.log('Users.isLogged.success', user);\n            user && user.isAuthenticated ? deferred.resolve(user) : deferred.reject();\n        }, function error(response) {\n            // console.log('Users.isLogged.error', data);\n            deferred.reject(response);\n        })\n        return deferred.promise;\n    };\n\n    Users.isAdmin = function () {\n        var deferred = $q.defer();\n        Users.getCurrentUser().then(function (user) {\n            user && user.isAuthenticated && user.isAdmin ? deferred.resolve(user) : deferred.reject();\n        }, function error(response) {\n            deferred.reject(response);\n        })\n        return deferred.promise;\n    };\n\n    Users.isLoggedOrGoTo = function(redirect) {\n        var deferred = $q.defer();\n        Users.getCurrentUser().then(function (user) {\n            // console.log('Users.isLogged.success', user);\n            if (user && user.isAuthenticated) {\n                deferred.resolve(user);\n            } else {\n                deferred.reject();\n                $location.path(redirect);\n            }\n        }, function error(response) {\n            // console.log('Users.isLogged.error', data);\n            deferred.reject(response);\n            $location.path(redirect);\n        })\n        return deferred.promise;\n    };\n\n    Users.isAdminOrGoTo = function(redirect) {\n        var deferred = $q.defer();\n        Users.getCurrentUser().then(function (user) {\n            // console.log('Users.isLogged.success', user);\n            if (user && user.isAuthenticated && user.isAdmin) {\n                deferred.resolve(user);\n            } else {\n                deferred.reject();\n                $location.path(redirect);\n            }\n        }, function error(response) {\n            // console.log('Users.isLogged.error', data);\n            deferred.reject(response);\n            $location.path(redirect);\n        })\n        return deferred.promise;\n    },\n\n    /** LOGIN METHODS **/\n    Users.signup = function (model) {\n        var deferred = $q.defer();\n        $http.post(APP.API + '/api/users/signup/', model).then(function success(response) {\n            _currentUser = new User(response.data);\n            deferred.resolve(_currentUser);\n        }, function error(response) {\n            deferred.reject(response);\n        });\n        return deferred.promise;\n    };\n\n    Users.signin = function (model) {\n        var deferred = $q.defer();\n        $http.post(APP.API + '/api/users/signin/', model).then(function success(response) {\n            _currentUser = new User(response.data);\n            deferred.resolve(_currentUser);\n        }, function error(response) {\n            deferred.reject(response);\n        });\n        return deferred.promise;\n    };\n\n    Users.signInWithFacebook = function (auth) {\n        var deferred = $q.defer();\n        $http.post(APP.API + '/api/users/signinwithfacebook/', auth).then(function success(response) {\n            _currentUser = new User(response.data);\n            deferred.resolve(_currentUser);\n        }, function error(response) {\n            deferred.reject(response);\n        });\n        return deferred.promise;\n    };\n\n    Users.signout = function () {\n        var deferred = $q.defer();\n        $http.get(APP.API + '/api/users/signout/').then(function success(response) {\n            _currentUser = null;\n            deferred.resolve(response.data);\n        }, function error(response) {\n            deferred.reject(response);\n        });\n        return deferred.promise;\n    };\n\n    Users.detail = function (userRoute) {\n        var deferred = $q.defer();\n        $http.get(APP.API + '/api/users/route/' + userRoute).then(function success(response) {\n            deferred.resolve(new User(response.data));\n        }, function error(response) {\n            deferred.reject(response);\n        });\n        return deferred.promise;\n    };\n\n    return Users;\n}]);\n\napp.factory('Vector', function() {\n\tfunction Vector(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Vector.make = function (a, b) {\n        return new Vector(b.x - a.x, b.y - a.y);\n    };\n    Vector.size = function (a) {\n        return Math.sqrt(a.x * a.x + a.y * a.y);\n    };\n    Vector.normalize = function (a) {\n        var l = Vector.size(a);\n        a.x /= l;\n        a.y /= l;\n        return a;\n    };\n    Vector.incidence = function (a, b) {\n        var angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\n        // if (angle < 0) angle += 2 * Math.PI;\n        // angle = Math.min(angle, (Math.PI * 2 - angle));\n        return angle;\n    };\n    Vector.distance = function (a, b) {\n        return Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\n    };\n    Vector.cross = function (a, b) {\n        return (a.x * b.y) - (a.y * b.x);\n    };\n    Vector.difference = function (a, b) {\n        return new Vector(b.x - a.x, b.y - a.y);\n    };\n    Vector.prototype = {\n        size: function () {\n            return Vector.size(this);\n        },\n        normalize: function () {\n            return Vector.normalize(this);\n        },\n        incidence: function (b) {\n            return Vector.incidence(this, b);\n        },\n        cross: function (b) {\n            return Vector.cross(this, b);\n        },\n        towards: function (b, friction) {\n            friction = friction || 0.125;\n            this.x += (b.x - this.x) * friction;\n            this.y += (b.y - this.y) * friction;\n            return this;\n        },\n        add: function (b) {\n            this.x += b.x;\n            this.y += b.y;\n            return this;\n        },\n        friction: function (b) {\n            this.x *= b;\n            this.y *= b;\n            return this;\n        },\n        copy: function (b) {\n            return new Vector(this.x, this.y);\n        },\n        toString: function () {\n            return '{' + this.x + ',' + this.y + '}';\n        },\n    };\n    return Vector;\n});\n\napp.factory('Utils', ['Vector', function (Vector) {\n    (function () {\n        var lastTime = 0;\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\n                                       || window[vendors[x] + 'CancelRequestAnimationFrame'];\n        }\n        if (!window.requestAnimationFrame) {\n            window.requestAnimationFrame = function (callback, element) {\n                var currTime = new Date().getTime();\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n                var id = window.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\n                lastTime = currTime + timeToCall;\n                return id;\n            };\n        }\n        if (!window.cancelAnimationFrame) {\n            window.cancelAnimationFrame = function (id) {\n                clearTimeout(id);\n            };\n        }\n    }());\n\n    var transformProperty = function detectTransformProperty() {\n        var transformProperty = 'transform',\n            safariPropertyHack = 'webkitTransform';\n\t\tvar div = document.createElement(\"DIV\");\n        if (typeof div.style[transformProperty] !== 'undefined') {\n            ['webkit', 'moz', 'o', 'ms'].every(function(prefix) {\n                var e = '-' + prefix + '-transform';\n                if (typeof div.style[e] !== 'undefined') {\n                    transformProperty = e;\n                    return false;\n                }\n                return true;\n            });\n        } else if (typeof div.style[safariPropertyHack] !== 'undefined') {\n            transformProperty = '-webkit-transform';\n        } else {\n            transformProperty = undefined;\n        }\n        return transformProperty;\n    } ();\n\n    var _isTouch;\n    function isTouch() {\n        if (!_isTouch) {\n            _isTouch = {\n                value: ('ontouchstart' in window || 'onmsgesturechange' in window)\n            }\n        }\n        // console.log(_isTouch);\n        return _isTouch.value;\n    }\n\n    function getTouch(e, previous) {\n        var t = new Vector();\n        if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\n            var touch = null;\n            var event = e.originalEvent ? e.originalEvent : e;\n            var touches = event.touches.length ? event.touches : event.changedTouches;\n            if (touches && touches.length) {\n                touch = touches[0];\n            }\n            if (touch) {\n                t.x = touch.pageX;\n                t.y = touch.pageY;\n            }\n        } else if (e.type == 'click' || e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\n            t.x = e.pageX;\n            t.y = e.pageY;\n        }\n        if (previous) {\n            t.s = Vector.difference(previous, t);\n        }\n        t.type = e.type;\n        return t;\n    }\n\n    function getRelativeTouch(element, point) {\n        var rect = element[0].getBoundingClientRect();\n        var e = new Vector(rect.left,  rect.top);\n        return Vector.difference(e, point);\n    }\n\n    function getClosest(el, selector) {\n        var matchesFn, parent;\n        ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\n            if (typeof document.body[fn] == 'function') {\n                matchesFn = fn;\n                return true;\n            }\n            return false;\n        });\n        while (el !== null) {\n            parent = el.parentElement;\n            if (parent !== null && parent[matchesFn](selector)) {\n                return parent;\n            }\n            el = parent;\n        }\n        return null;\n    }\n\n\n    var getNow = Date.now || function() {\n        return new Date().getTime();\n    };\n\n    function throttle(func, wait, options) {\n        // Returns a function, that, when invoked, will only be triggered at most once\n        // during a given window of time. Normally, the throttled function will run\n        // as much as it can, without ever going more than once per `wait` duration;\n        // but if you'd like to disable the execution on the leading edge, pass\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\n        var context, args, result;\n        var timeout = null;\n        var previous = 0;\n        if (!options) options = {};\n        var later = function () {\n            previous = options.leading === false ? 0 : getNow();\n            timeout = null;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        };\n        return function () {\n            var now = getNow();\n            if (!previous && options.leading === false) previous = now;\n            var remaining = wait - (now - previous);\n            context = this;\n            args = arguments;\n            if (remaining <= 0 || remaining > wait) {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                previous = now;\n                result = func.apply(context, args);\n                if (!timeout) context = args = null;\n            } else if (!timeout && options.trailing !== false) {\n                timeout = setTimeout(later, remaining);\n            }\n            return result;\n        };\n    }\n\n    var Style = function() {\n        function Style() {\n            this.props = {\n                scale: 1,\n                hoverScale: 1,\n                currentScale: 1,\n            }\n        }\n        Style.prototype = {\n            set: function (element) {\n                var styles = [];\n                angular.forEach(this, function (value, key) {\n                    if (key !== 'props')\n                        styles.push(key + ':' + value);\n                });\n                element.style.cssText = styles.join(';') + ';';\n            },\n            transform: function (transform) {\n                this[Utils.transformProperty] = transform;\n            },\n            transformOrigin: function (x, y) {\n                this[Utils.transformProperty + '-origin-x'] = (Math.round(x * 1000) / 1000) + '%';\n                this[Utils.transformProperty + '-origin-y'] = (Math.round(y * 1000) / 1000) + '%';\n            },\n        };\n        return Style;\n    }();\n\n    function Utils() {\n    }\n\n\tUtils.transformProperty = transformProperty;\n    Utils.getTouch = getTouch;\n    Utils.getRelativeTouch = getRelativeTouch;\n    Utils.getClosest = getClosest;\n    Utils.throttle = throttle;\n    Utils.Style = Style;\n\n    return Utils;\n}]);\n\n/*global angular*/\n\napp.factory('WebWorker', ['$q', '$http', function ($q, $http) {\n    var isWebWorkerSupported = (typeof (Worker) !== \"undefined\");\n    if (!isWebWorkerSupported) {\n        window.Worker = function () {\n            function Worker(src) {\n                var self = this;\n                $http.get(src, { transformResponse: function (d, h) { return d } }).then(function success(response) {\n                    try {\n                        eval('self.o = function(){ function postMessage(e) { self.onmessage({data:e}); }\\n ' + response.data + ' };');\n                        self.object = new self.o();\n                        self.object.postMessage = function (e) {\n                            self.onmessage({data:e});\n                        }\n                    } catch(e) {\n                        console.log(\"Worker error \", e);\n                    }\n                }, function error(response) {\n                    console.log(\"Worker not found\");\n                });\n            }\n            Worker.prototype = {\n                onmessage: function (e) {\n                    console.log('Worker not implemented');\n                },\n                postMessage: function (e) {\n                    this.object.onmessage({ data: e });\n                }\n            }\n            return Worker;\n        } ();\n    }\n    function WebWorker(src) {\n        var self = this;\n        this.callbacks = {};\n        this.id = 0;\n        this.worker = new Worker(src);\n        this.worker.onmessage = function (e) {\n            self.onmessage(e);\n        };\n    }\n    WebWorker.prototype = {\n        parse: function (e) {\n            return JSON.parse(e.data);\n        },\n        stringify: function (data) {\n            return JSON.stringify(data);\n        },\n        onmessage: function (e) {\n            var data = this.parse(e);\n            var deferred = this.callbacks[data.id];\n            if (data.status !== -1) {\n                deferred.resolve(data);\n            } else {\n                deferred.reject(data);\n            }\n            delete this.callbacks[data.id];\n        },\n        post: function (data) {\n            var deferred = $q.defer();\n            data.id = this.id;\n            this.callbacks[this.id.toString()] = deferred;\n            this.id++;\n            this.worker.postMessage(this.stringify(data));\n            return deferred.promise;\n        },\n    };\n    WebWorker.isSupported = isWebWorkerSupported;\n    return WebWorker;\n}]);\n\napp.factory('$httpAsync', ['$q', '$http', function ($q, $http) {\n    var isWebWorkerSupported = (typeof (Worker) !== \"undefined\");\n    if (!isWebWorkerSupported) {\n        return $http;\n    }\n    var worker = new Worker('/js/workers/http.min.js');\n    var callbacks = {};\n    var id = 0;\n    var lowercase = function (string) { return isString(string) ? string.toLowerCase() : string; };\n    var trim = function (value) {\n        return isString(value) ? value.trim() : value;\n    };\n    function $httpAsync(options) {\n        var deferred = $q.defer();\n        var wrap = getDefaults(options);\n        wrap.id = id.toString();\n        console.log('wrap', wrap);\n        callbacks[wrap.id] = deferred;\n        id++;\n        worker.postMessage($httpAsync.stringify(wrap));\n        return deferred.promise;\n    }\n    $httpAsync.get = function (url, config) {\n        return $httpAsync(angular.extend({}, config || {}, {\n            method: 'GET',\n            url: url\n        }));\n    };\n    $httpAsync.delete = function (url, config) {\n        return $httpAsync(angular.extend({}, config || {}, {\n            method: 'DELETE',\n            url: url\n        }));\n    };\n    $httpAsync.head = function (url, config) {\n        return $httpAsync(angular.extend({}, config || {}, {\n            method: 'HEAD',\n            url: url\n        }));\n    };\n    $httpAsync.post = function (url, data, config) {\n        return $httpAsync(angular.extend({}, config || {}, {\n            method: 'POST',\n            data: data,\n            url: url\n        }));\n    };\n    $httpAsync.put = function (url, data, config) {\n        return $httpAsync(angular.extend({}, config || {}, {\n            method: 'PUT',\n            data: data,\n            url: url\n        }));\n    };\n    $httpAsync.patch = function (url, data, config) {\n        return $httpAsync(angular.extend({}, config || {}, {\n            method: 'PATCH',\n            data: data,\n            url: url\n        }));\n    };\n    $httpAsync.parse = function (e) {\n        return JSON.parse(e.data);\n    };\n    $httpAsync.stringify = function (data) {\n        return JSON.stringify(data);\n    };\n    $httpAsync.isSupported = isWebWorkerSupported;\n    worker.onmessage = function (e) {\n        var wrap = $httpAsync.parse(e);\n        console.log('onmessage', wrap);\n        var deferred = callbacks[wrap.id];\n        var status = wrap.status >= -1 ? wrap.status : 0;\n        var getter = headersGetter(wrap.response.headers);\n        (isSuccess(status) ? deferred.resolve : deferred.reject)({\n            data: wrap.response.data, // !!!! JSON.parse(wrap.response.data),\n            headers: getter,\n            status: wrap.response.status,\n            statusText: wrap.response.statusText,\n            config: wrap.config,\n        });\n        delete callbacks[wrap.id];\n    }\n    return $httpAsync;\n    function isSuccess(status) {\n        return 200 <= status && status < 300;\n    }\n    function createMap() {\n        return Object.create(null);\n    }\n    function isString(value) { return typeof value === 'string'; }\n    function parseHeaders(headers) {\n        var parsed = createMap(), i;\n        function fillInParsed(key, val) {\n            if (key) {\n                parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n            }\n        }\n        if (isString(headers)) {\n            var a = headers.split('\\n');\n            for (var j = 0; j < a.length; j++) {\n                var line = a[j];\n                i = line.indexOf(':');\n                fillInParsed(lowercase(trim(line.substr(0, i))), trim(line.substr(i + 1)));\n            }\n        } else if (isObject(headers)) {\n            for (var p in headers) {\n                fillInParsed(lowercase(p), trim(headers[p]));\n            }\n        }\n        return parsed;\n    }\n    function headersGetter(headers) {\n        var headersObj;\n        return function (name) {\n            if (!headersObj) headersObj = parseHeaders(headers);\n            if (name) {\n                var value = headersObj[lowercase(name)];\n                if (value === void 0) {\n                    value = null;\n                }\n                return value;\n            }\n            return headersObj;\n        };\n    }\n    function getDefaults(options) {\n        var defaults = {\n            method: 'GET',\n            withCredentials: false,\n            responseType: 'json',\n            headers: {},\n            config: {}\n        }\n        defaults.withCredentials = $http.defaults.withCredentials;\n        angular.extend(defaults.headers, $http.defaults.headers.common);\n        var method = (options.method || defaults.method).toLowerCase();\n        if ($http.defaults.headers[method]) {\n            angular.extend(defaults.headers, $http.defaults.headers[method]);\n        }\n        console.log('defaults', $http.defaults);\n        // defaults = angular.extend(defaults, $http.defaults);\n        /*\n    method{string}:                     HTTP method (e.g. 'GET', 'POST', etc)\n    url:{string}:                       Absolute or relative URL of the resource that is being requested.\n    params:{Object.<string|Object>}:    Map of strings or objects which will be serialized with the paramSerializer and appended as GET parameters.\n\n    data:{string|Object}:               Data to be sent as the request message data.\n    headers:{Object}:                   Map of strings or functions which return strings representing HTTP headers to send to the server. If the return value of a function is null, the header will not be sent. Functions accept a config object as an argument.\n\n    xsrfHeaderName:{string}:            Name of HTTP header to populate with the XSRF token.\n    xsrfCookieName:{string}:            Name of cookie containing the XSRF token.\n    transformRequest:{function(data, headersGetter)|Array.<function(data, headersGetter)>}:         transform function or an array of such functions. The transform function takes the http request body and headers and returns its transformed (typically serialized) version. See Overriding the Default Transformations\n\n    transformResponse:{function(data, headersGetter, status)|Array.<function(data, headersGetter, status)>}:    transform function or an array of such functions. The transform function takes the http response body, headers and status and returns its transformed (typically deserialized) version. See Overriding the Default TransformationjqLiks\n\n    paramSerializer:{string|function(Object<string,string>):string}:        A function used to prepare the string representation of request parameters (specified as an object). If specified as string, it is interpreted as function registered with the $injector, which means you can create your own serializer by registering it as a service. The default serializer is the $httpParamSerializer; alternatively, you can use the $httpParamSerializerJQLike\n\n    cache:{boolean|Cache}:              If true, a default $http cache will be used to cache the GET request, otherwise if a cache instance built with $cacheFactory, this cache will be used for caching.\n\n    timeout:{number|Promise}:           timeout in milliseconds, or promise that should abort the request when resolved.\n    withCredentials:{boolean}:          whether to set the withCredentials flag on the XHR object. See requests with credentials for more information.\n\n    responseType:{string}:              see XMLHttpRequest.responseType.\n        */\n        options ? options = angular.extend(defaults, options) : defaults;\n        return options;\n    }\n}]);\n"],"sourceRoot":"/source/"}